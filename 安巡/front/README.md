# 安巡 - 校园网络风险感知智能体

🛡️ 一个基于大语言模型的智能网络安全分析平台，专为校园网络环境设计。

## 项目简介

安巡是一个创新的网络安全智能体，通过"流量文本化"技术将网络流量转化为大语言模型可理解的文本，实现从"被动检测"到"主动感知"的范式革新。

### 核心特性

- 🤖 **智能对话**: 基于Ollama API的自然语言交互
- 📊 **流量分析**: 实时网络捕获与可视化分析
- 📚 **教育资源**: 网络安全知识学习平台
- 🎯 **简洁界面**: 基于Streamlit的现代化UI设计

## 功能模块

### 1. 智能对话助手
- 与安巡智能体进行自然语言对话
- 支持流量包文件上传和分析
- 调用本地Ollama API进行智能问答

### 2. 流量分析系统
- **实时捕获**: 使用PyShark进行网络流量实时捕获
- **文件分析**: 支持pcap、pcapng、cap格式流量包分析
- **可视化展示**: 提供饼图、柱状图、直方图等多种图表
- **五元组分析**: 详细展示源IP、目标IP、端口、协议信息

### 3. 教育资源中心
- 网络安全基础知识学习
- 电信诈骗防护指南
- 交互式安全知识测试
- 外部资源链接导航

## 安装指南

### 环境要求
- Python 3.8+
- Ollama服务 (本地运行在localhost:11434)

### 安装步骤

1. **克隆项目**
   ```bash
   cd c:\Users\26052\Desktop\安巡
   ```

2. **安装依赖**
   ```bash
   pip install -r requirements.txt
   ```

3. **启动Ollama服务**
   ```bash
   # 确保Ollama已安装并运行
   ollama serve
   # 拉取所需模型
   ollama pull llama3.1
   ```

4. **运行应用**
   ```bash
   streamlit run app.py
   ```

5. **访问应用**
   打开浏览器访问: http://localhost:8501

## 使用说明

### 智能对话
1. 在左侧导航选择"🤖 智能对话"
2. 在输入框中输入问题或上传流量包
3. 点击"发送"获取AI回复
4. 支持上传pcap文件进行智能分析

### 流量分析
1. 选择"📊 流量分析"模块
2. **实时捕获**: 设置捕获时长，点击"开始捕获"
3. **文件分析**: 上传流量包文件进行分析
4. **查看结果**: 在"分析结果"标签页查看可视化图表

### 教育学习
1. 选择"📚 教育资源"模块
2. 浏览网络安全和防诈骗知识
3. 点击链接访问外部学习资源
4. 参与安全知识测试

## 技术架构

- **前端框架**: Streamlit
- **AI引擎**: Ollama (支持Llama 3.1, Qwen3, DeepSeek-R1等)
- **流量捕获**: PyShark/TShark
- **数据可视化**: Plotly
- **数据处理**: Pandas

## 项目结构

```
安巡/
├── app.py              # 主应用文件
├── requirements.txt    # 依赖包列表
├── README.md          # 项目说明
├── 项目介绍.md        # 项目背景介绍
└── 前端要求.md        # 前端开发要求
```

## 开发说明

### 后端接口预留
应用已预留以下接口供后端集成:

1. **Ollama API调用**: `call_ollama_api(message, model)`
2. **流量包分析**: `analyze_pcap_file(file_content)`
3. **网络捕获**: `capture_network_traffic(duration)`

### 扩展功能
- 支持更多流量包格式
- 增加更多可视化图表类型
- 集成更多AI模型
- 添加用户认证系统

## 注意事项

1. **网络权限**: 流量捕获功能需要管理员权限
2. **Ollama服务**: 确保Ollama服务正常运行在localhost:11434
3. **文件大小**: 建议上传的流量包文件不超过100MB
4. **浏览器兼容**: 推荐使用Chrome、Firefox等现代浏览器

## 故障排除

### 常见问题

1. **Ollama连接失败**
   - 检查Ollama服务是否启动: `ollama serve`
   - 确认端口11434未被占用

2. **流量捕获失败**
   - 确保以管理员权限运行
   - 检查网络接口权限

3. **依赖安装失败**
   - 更新pip: `pip install --upgrade pip`
   - 使用国内镜像: `pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple/`

## 贡献指南

欢迎提交Issue和Pull Request来改进项目！

## 许可证

本项目采用MIT许可证，详见LICENSE文件。

---

🛡️ **安巡团队** - 让网络安全更智能、更有温度